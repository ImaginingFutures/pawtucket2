cache_timeout = 86400

#
# 
#
browseTypes = {
	objects = {
		displayName = _(Objects),
		labelSingular = _("object"),
 		labelPlural = _("objects"),
		table = ca_objects,
		
		restrictToTypes = [],
		#dontExpandTypesHierarchically = true,
		availableFacets = [],
		
		itemsPerPage = 18,
		
		# formats available for display of results
		# possible values are: images, list, timeline, map
		views = {
			images = {},
			list = {}
		},
		defaultView = images,
		sortBy = {
			Identifier = ca_objects.idno,
			Title = ca_object_labels.name
		},
		# --- default sort direction for the sortBy options
		sortDirection = {
			Identifier = asc,
			Title = desc
		}
	},
	collections = {
		displayName = _(Collections),
		labelSingular = _("collection"),
 		labelPlural = _("collections"),
		table = ca_collections,
		restrictToTypes = [],

		# formats available for display of results
		# possible values are: images, list, timeline, map
		views = {
			list = {}
		},
		defaultView = list,
		
		sortBy = {
			Relevance = _natural,
			Identifier = ca_collections.idno,
			Name = ca_collection_labels.name
		},
		# --- sortControlType = dropdown or list
		sortControlType = dropdown
	},
	entities = {
		displayName = _(People/Orgs),
		labelSingular = _("person"),
 		labelPlural = _("people"),
		table = ca_entities,
		restrictToTypes = [],
		
		# formats available for display of results
		# possible values are: images, list, timeline, map
		views = {
			list = {}
		},
		defaultView = list,
		
		sortBy = {
			Name = ca_entity_labels.surname
		}
	},
	exhibitions = {
		displayName = _(Exhibitions),
		labelSingular = _("Exhibitions"),
 		labelPlural = _("Exhibitions"),
		table = ca_occurrences,
		restrictToTypes = [exhibitions],
		
		excludeFieldsFromSearch = [ca_occurrences.description_archival],
		
		itemsPerPage = 10,
		facetGroup = refine,
		
		usePreviewHelper = caGetExhibitionBrowsePreviews,
		
		# formats available for display of results
		# possible values are: images, list, timeline, map
		views = {
			list = {}
			images = {
                representation = <ifcount code='ca_objects' min='1'><unit relativeTo='ca_objects' length='1'><ifcount code='ca_object_representations' min='1'>^ca_object_representations.media.large%length=1</ifcount></unit></ifcount>,
                exhibitdate = "<unit relativeTo='ca_occurrences.dates' skipWhen='^ca_occurrences.dates.dates_type !~ /Exhibition dates/'>^ca_occurrences.dates.dates_value</unit>"
            },
        },
        defaultView = images,

		sortBy = {
		    Name = ca_occurrences.preferred_labels.name,
		    Date = ca_occurrences.date
		}
	}
}


ca_occurrences = {
	name = _("Exhibitions"),
		show_all_for_no_criteria_browse = 1,
	facets = {
	    exhibition = {
			# 'type' can equal authority, attribute, fieldList, normalizedDates
			type = label,		
			restrict_to_types = [exhibitions],
			
			#individual_group_display = 1,
			#browse_by_first_letter = 1,
			
			multiple = 1,
			facet_groups = [front],
			
			groupings = {},
			group_mode = alphabetical,
			order_by_label_fields = [name],
			facet_groups = [front],
			
			indefinite_article = an,
			label_singular = _("Exhibition"),
			label_plural = _("Exhibitions"),
			description = _("List of exhibitions"),
		},
        entity = {
            type = authority,
            table = ca_entities,
            relationship_table = ca_entities_x_occurrences,
            restrict_to_types = [],
            restrict_to_relationship_types = [curator],

			multiple = 1,
            group_mode = none,
			facet_groups = [front, refine],

            label_singular = _("Curator"),
            label_plural = _("Curators"),
            description = _("Exhibitions by curators."),
        },
		
		extype = {
			type = attribute,
			element_code = Ex_type,
			
			multiple = 1,
			group_mode = alphabetical,
			
			facet_groups = [front, refine],
			
			label_singular = _("Exhibition type"),
			label_plural = _("Exhibition types"),
			description = _("Student or Faculty Exhibition"),		
		},
			
		decade = {
			type = normalizedDates,
			element_code = dates.dates_value,
			normalization = decades,
			
			group_mode = none,
			multiple = 1,
			
			facet_groups = [front, refine],

			minimum_date = 1900,
			
			label_singular = _("Decade"),
			label_plural = _("Decades"),
			description = _("Exhibitions by decade"),			
		}
	}
}

ca_entities = {
	name = _("Exhibitors"),
	facets = {
        exhibitor = {
			# 'type' can equal authority, attribute, fieldList, normalizedDates
			type = label,		
			
			individual_group_display = 1,
			
			browse_by_first_letter = 1,
			
			facet_groups = [front, refine],
			
			relationship = ca_entities_x_occurrences,
			restrict_to_relationship_types = [exhibitor, curator],
			
			groupings = {},
			group_mode = alphabetical,
			order_by_label_fields = [surname],
			
			indefinite_article = an,
			label_singular = _("exhibitor"),
			label_plural = _("exhibitors"),
			description = _("List of exhibitors"),
		},
		
		role_facet = {
            type = relationship_types,
            table = ca_occurrences,
            relationship_table = ca_entities_x_occurrences,
            group_mode = alphabetical,

            facet_groups = [refine],

            label_singular = _("type"),
            label_plural = _("types")
        },
    }
}
